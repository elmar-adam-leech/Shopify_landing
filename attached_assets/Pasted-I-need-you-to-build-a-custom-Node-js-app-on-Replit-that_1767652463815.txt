I need you to build a custom Node.js app on Replit that integrates Twilio for handling incoming calls and Shopify for creating customers. The goal is to track phone calls back to Google Ads by capturing and passing the GCLID (Google Click ID) where possible, using dynamic number insertion (DNI) for call attribution.
Key Requirements:

Server Setup:
Use Express.js as the web framework.
Set up environment variables in Replit's Secrets for sensitive info: TWILIO_ACCOUNT_SID, TWILIO_AUTH_TOKEN, SHOPIFY_API_KEY, SHOPIFY_API_SECRET, SHOPIFY_STORE_URL (e.g., mystore.myshopify.com), and a database connection if needed.
The app should run on port 3000 and handle HTTP requests.

Twilio Integration:
Use the Twilio Node.js SDK.
Provision a pool of 10-20 Twilio phone numbers (local or toll-free) via the Twilio API or manually in the console, and store them in an array or database.
Configure a webhook endpoint (e.g., /incoming-call) that Twilio calls when a call comes in. This should be set in the Twilio console for each number: Voice > Webhook > POST to your Replit app's URL (e.g., https://your-replit-app.replit.app/incoming-call).
In the webhook handler:
Extract parameters from Twilio: 'From' (caller's number), 'To' (dialed tracking number), CallSID.
Look up the associated GCLID using the 'To' number (from a database or in-memory store).
Create a Shopify customer using the caller's phone number.
Optionally, respond with TwiML to handle the call (e.g., say a message or forward to another number).


Shopify Integration:
Use the Shopify Node.js API library (@shopify/shopify-api).
Authenticate with Shopify using API keys.
In the webhook handler, after getting call details, make a POST request to create a customer:
Endpoint: /admin/api/2024-10/customers.json
Payload: { customer: { phone: callerNumber, tags: gclid:${gclid} } } // Tag with GCLID if available.

Handle errors and log them.

Dynamic Number Insertion (DNI) for GCLID Tracking:
Create an endpoint (e.g., /get-tracking-number) that the website's JavaScript can call.
When called, it receives the GCLID from the query param (e.g., ?gclid=ABC123).
Assign a unique phone number from the pool.
Store the association in a simple database (use Replit's built-in database or SQLite): tracking_number -> { gclid, timestamp, sessionId }.
Expire assignments after 60 minutes to recycle numbers.
Return the tracking number to the client JS, which swaps it on the page.
For click-to-dial: The tel: link uses this number.
For manual dial: Same, as the displayed number is tied to the GCLID.

Handling Cases Without Click (Manual Dial):
With DNI: Use the 'To' number in the webhook to lookup GCLID.
Without DNI (fallback): Just create the customer without GCLID.

Database:
Use @replit/database for simple key-value storage of number assignments.

Website Snippet (Provide as Output):
After building, output a JavaScript snippet that websites can include to fetch and swap the phone number dynamically.

Testing:
Add a test endpoint to simulate assigning numbers and webhooks.
Ensure the app handles concurrent requests.


Build this step-by-step, install necessary packages via npm (express, twilio, @shopify/shopify-api, @replit/database), and make sure it's secure. Start with the server skeleton and add features one by one.